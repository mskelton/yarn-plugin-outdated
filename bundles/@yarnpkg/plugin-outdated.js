/* eslint-disable */
module.exports = {
name: "@yarnpkg/plugin-outdated",
factory: function (require) {
var plugin;plugin=(()=>{"use strict";var e={706:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(747);const s={commands:[n.OutdatedCommand]}},742:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DependencyFetcher=void 0;const n=r(850),s=r(687);t.DependencyFetcher=class{constructor(e,t,r){this.project=e,this.workspace=t,this.cache=r}async fetch(e,t){const r=await n.suggestUtils.fetchDescriptorFrom(e,t,{cache:this.cache,preserveModifier:e.range,project:this.project,workspace:this.workspace});return s.parseVersion(null===r?e.range:r.range)}}},732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DependencyTable=void 0;const n=r(966),s=r(513),o=["name","current","wanted","latest","workspace","type"];t.DependencyTable=class{constructor(e,t,r){this.configuration=e,this.dependencies=t,this.extraColumns=r,this.sizes=null,this.headers={current:"Current",latest:"Latest",name:"Package",type:"Package Type",wanted:"Wanted",workspace:"Workspace"}}print(){this.sizes=this.getColumnSizes(),this.printHeader(),this.dependencies.forEach(e=>{var t,r;const o=s.parse(e.current),a=s.parse(e.latest),i=a.major>o.major?"red":a.minor>o.minor?"yellow":"green";this.printRow({current:e.current.padEnd(this.sizes.current),latest:e.latest.padEnd(this.sizes.latest),name:n.formatUtils.pretty(this.configuration,e.name.padEnd(this.sizes.name),i),type:e.type.padEnd(this.sizes.type),wanted:null===(t=e.wanted)||void 0===t?void 0:t.padEnd(this.sizes.wanted),workspace:null===(r=e.workspace)||void 0===r?void 0:r.padEnd(this.sizes.workspace)})})}getColumnSizes(){const e={current:this.headers.current.length,latest:this.headers.latest.length,name:this.headers.name.length,type:this.headers.type.length,wanted:this.headers.wanted.length,workspace:this.headers.workspace.length};for(const t of this.dependencies)for(const[r,n]of Object.entries(t)){const t=e[r],s=(n||"").length;e[r]=t>s?t:s}return e}formatColumnHeader(e){return n.formatUtils.pretty(this.configuration,this.headers[e].padEnd(this.sizes[e]),"bold")}printHeader(){this.printRow({current:this.formatColumnHeader("current"),latest:this.formatColumnHeader("latest"),name:this.formatColumnHeader("name"),type:this.formatColumnHeader("type"),wanted:this.formatColumnHeader("wanted"),workspace:this.formatColumnHeader("workspace")})}printRow(e){const t=o.filter(e=>{var t;return null===(t=this.extraColumns[e])||void 0===t||t}).map(t=>e[t]).join("   ");console.log(t)}}},747:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.OutdatedCommand=void 0;const s=r(594),o=r(966),a=r(42),i=r(513),c=r(742),d=r(732),p=r(687);class l extends s.BaseCommand{constructor(){super(...arguments),this.all=!1,this.wanted=!1,this.json=!1}async execute(){const{cache:e,configuration:t,project:r,workspace:n}=await this.loadProject(),s=new c.DependencyFetcher(r,n,e),o=this.getWorkspaces(r,n),a=this.getDependencies(o),i=await this.getOutdatedDependencies(s,a);this.json?console.log(JSON.stringify(i)):new d.DependencyTable(t,i,{wanted:this.wanted,workspace:this.all}).print()}async loadProject(){const e=await o.Configuration.find(this.context.cwd,this.context.plugins),[t,{project:r,workspace:n}]=await Promise.all([o.Cache.find(e),o.Project.find(e,this.context.cwd)]);if(!n)throw new s.WorkspaceRequiredError(r.cwd,this.context.cwd);return{cache:t,configuration:e,project:r,workspace:n}}getWorkspaces(e,t){return this.all?e.workspaces:[t]}getDependencies(e){const t=[],r=["dependencies","devDependencies"];for(const n of e)for(const e of r)for(const r of n.manifest[e].values())t.push({dependencyType:e,descriptor:r,workspace:n});return t}async getOutdatedDependencies(e,t){const r=t.map(async({dependencyType:t,descriptor:r,workspace:n})=>{const s=i.valid(r.range)?"^"+r.range:r.range,[a,c]=await Promise.all([e.fetch(r,"latest"),this.wanted?e.fetch(r,s):void 0]);return{current:p.parseVersion(r.range),latest:a,name:o.structUtils.stringifyIdent(r),type:t,wanted:c,workspace:this.all?n.computeCandidateName():void 0}});return(await Promise.all(r)).filter(e=>i.neq(e.current,e.latest)).sort((e,t)=>e.name.localeCompare(t.name))}}n([a.Command.Boolean("-a,--all")],l.prototype,"all",void 0),n([a.Command.Boolean("-w,--wanted")],l.prototype,"wanted",void 0),n([a.Command.Boolean("--json")],l.prototype,"json",void 0),n([a.Command.Path("outdated")],l.prototype,"execute",null),t.OutdatedCommand=l},687:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseVersion=void 0;const n=r(513);t.parseVersion=e=>n.valid(n.coerce(e))},594:e=>{e.exports=require("@yarnpkg/cli")},966:e=>{e.exports=require("@yarnpkg/core")},850:e=>{e.exports=require("@yarnpkg/plugin-essentials")},42:e=>{e.exports=require("clipanion")},513:e=>{e.exports=require("semver")}},t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(706)})();
return plugin;
}
};